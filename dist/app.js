!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var i=window.localStorage,r=function(e){var t=e.filter((function(e){return"movie"===e.Type||"series"===e.Type}));return i.getItem("savedList")?t.filter((function(e){return!function(e){var t=JSON.parse(i.getItem("savedList")),n=t.movies,r=t.series,a=e.imdbID;return!!("movie"===e.Type?n.find((function(e){return e.imdbID===a})):r.find((function(e){return e.imdbID===a})))}(e)})):t},a=function(e){return new Promise((function(t,n){var i=e.get("movieTitle");fetch("https://www.omdbapi.com/?apikey=c223f3f3&s=".concat(i)).then((function(e){return e.json()})).then((function(e){console.log(e);var n=e.Search;n&&n.length>0?t(r(n)):t([])})).catch((function(e){return n(e)}))}))},o=window.localStorage,c=function(e){o.getItem("savedList")||o.setItem("savedList",JSON.stringify({movies:[],series:[]}));var t=JSON.parse(o.getItem("savedList")),n=t.movies,i=t.series;"movie"===e.Type?n.push(e):i.push(e),o.setItem("savedList",JSON.stringify(t))},s=function(e,t){var n=JSON.parse(o.getItem("savedList")),i=n.movies,r=n.series;if("movie"===e){var a=i.find((function(e){return e.imdbID===t})),c=i.indexOf(a);i.splice(c,1)}else{var s=r.find((function(e){return e.imdbID===t})),d=r.indexOf(s);r.splice(d,1)}o.setItem("savedList",JSON.stringify(n))},d=document.querySelector(".app"),l=function(){d.innerHTML=""},u=function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"row"===e&&(t=document.createElement("section")).classList.add("row"),t},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.createElement("h".concat(t));return n.innerText=e,n},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"list",n=e.Title,i=e.Year,r=e.imdbID,a=e.Poster,o=e.Type,d=document.createElement("article");d.classList.add("col-12","col-md-3","col-lg-2","movie");var l=document.createElement("img");l.src=a,l.classList.add("movie__poster"),d.appendChild(l);var u=document.createElement("main");u.classList.add("movie__details");var f=document.createElement("h6");if(f.innerText=n,f.classList.add("movie__title"),u.appendChild(f),"search"===t){var m=document.createElement("p");m.innerText="".concat(o," | ").concat(i),m.classList.add("movie__extra"),u.appendChild(m),d.addEventListener("click",(function(){c(e),v()}))}else{var p=document.createElement("section");p.classList.add("movie__actions");var h=document.createElement("button");h.classList.add("btn","-fill-primary"),h.innerHTML="Seen it",h.addEventListener("click",(function(){s(o,r),v()})),p.appendChild(h),u.appendChild(p)}return d.appendChild(u),d},p=function(e){l();var t={};"noResults"===e&&(t={title:"No results found...",message:"Cannot find the movie you're looking for. Maybe it's already on your list?"});var n=document.createElement("h3");n.classList.add("text-center"),n.innerHTML='<span class="iconify" data-icon="twemoji:face-screaming-in-fear" data-inline="true"></span> '.concat(t.title);var i=document.createElement("p");i.classList.add("text-center"),i.innerText=t.message,d.appendChild(n),d.appendChild(i)},v=function(){l();var e=JSON.parse(o.getItem("savedList")),t=e.movies,n=e.series;if(0===t.length&&0===n.length&&h(),t.length>0){var i=u("row");i.classList.add("-nowrap"),t.forEach((function(e){i.appendChild(m(e,"list"))})),d.appendChild(f("Your Movies",3)),d.appendChild(i)}if(n.length>0){var r=u("row");r.classList.add("-nowrap"),n.forEach((function(e){r.appendChild(m(e,"list"))})),d.appendChild(f("Your Series",3)),d.appendChild(r)}},h=function(){l();var e=document.createElement("h3");e.classList.add("text-center"),e.innerText="Welcome to Watch It!";var t=document.createElement("p");t.classList.add("text-center"),t.innerText="Start adding movies by using the searchbar above!",d.appendChild(e),d.appendChild(t)},g=function(){var e=document.querySelector(".search"),t=new FormData(e);a(t).then((function(e){document.querySelector(".search input").value="",e.length>0?function(e){l();var t=f("".concat(e.length," result").concat(e.length>1?"s":"",":"),3),n=document.createElement("p");n.innerText="Click an item to add it to your list";var i=u("row");e.forEach((function(e){var t=m(e,"search");i.appendChild(t)})),d.appendChild(t),d.appendChild(n),d.appendChild(i)}(e):p("noResults")})).catch((function(e){p("noResults")})),window.removeEventListener("click",(function(e){return function e(t){document.querySelector(".search").contains(t.target)||(window.removeEventListener("click",(function(t){return e(t)})),document.querySelector(".search").classList.remove("active"))}(e)}))},y=window.localStorage,L=(document.querySelector(".app"),document.querySelector("#searchBtn")),S=document.querySelectorAll(".header__link");y.getItem("savedList")?v():h(),L.addEventListener("click",(function(e){e.preventDefault(),g()})),S.forEach((function(e){e.addEventListener("click",(function(){y.getItem("savedList")?v():h()}))}))}]);